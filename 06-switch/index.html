<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <title>スマートスイッチ（ファン用）設定｜三菱電機ホームソリューション ［マルチエリア空調］ Good Share！（グッシェア）｜三菱電機</title>
  <meta name="viewport" content="width=375, user-scalable=no">
  <!-- demoApp JSON -->
  <script src="../assets/js/06-json-switch.js"></script>

  <!-- demoApp CSS -->
  <link rel="stylesheet" href="../assets/css/demo-app.css">
  <link rel="stylesheet" href="../assets/css/drawer-menu.css">

  <!-- demoApp Position -->
  <link rel="stylesheet" href="../assets/css/elements-position.css">

  <!-- Bootstrap CSS/ICON -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Swiper CSS/Custom -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <link rel="stylesheet" href="../assets/css/swiper-custom.css">
  <!-- Tippy -->
  <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css" />
  <link rel="stylesheet" href="../assets/css/tippy-custom.css" />
</head>

<body>
  <div class="position-relative w-100 mx-auto overflow-hidden demo-app-wrap">
    <!-- Drawer menu icon -->
    <button type="button" class="floating-menu-icon" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDrawerMenu"
      aria-controls="offcanvasDrawerMenu" aria-label="メニューを開く">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-bar-right"
        viewBox="0 0 16 16">
        <path fill-rule="evenodd"
          d="M6 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L12.293 7.5H6.5A.5.5 0 0 0 6 8m-2.5 7a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5" />
      </svg>
    </button>
    <!-- Drawer menu -->
    <div class="drawer-menu"></div>

    <main class="position-absolute w-100 h-100">
      <!-- Slider main container -->
      <div class="swiper">
        <!-- Slider wrapper -->
        <div class="swiper-wrapper">
          <!-- Slides(create slides) -->
        </div>
        <!-- pagination -->
        <div class="swiper-pagination"></div>
        <!-- navigation buttons -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </main>

    <!-- footer -->
    <footer class="demo-app-wrap--footer border border-success-subtle">
      <div class="description">
        <!-- <strong class="note">NOTE</strong><br> -->
        <!-- create footer content -->
        <div id="footerContent" class="d-none"></div>
      </div>
    </footer>

    <!-- modal -->
    <!-- modalSwitch007 -->
    <div class="modal fade" id="modalSwitch007" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-6">設定情報シール貼付位置</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <p>スマートスイッチを取り付けた際に施工業者が貼り付けた設定情報シールで確認してください。</p>
            <img class="img-fluid figure-img d-block mx-auto border rounded-2 cs-modal-img-width-sm" src="../assets/img/switch/400S01.png">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- modalSwitch009 -->
    <div class="modal fade" id="modalSwitch009" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-6">アクセスポイントモードにする</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <ol>
              <li>ブレーカーを「ON」にします。
                <ul>
                  <li class="">すでにブレーカーが「ON」になっている場合は手順2へ進んでください。</li>
                  <li class="">電源をONにしてもスマートスイッチのWi-Fiランプは消灯状態です。</li>
                  <li class="">ブレーカーを入れて約5秒間はスイッチ操作ができません（P-04SWRCの場合、強/弱ランプが点灯）。</li>
                </ul>
              </li>
              <li>スマートスイッチに電源が入っていることを確認します。
                <img class="img-fluid figure-img d-block mx-auto cs-modal-img-width-sm" class="border-0" src="../assets/img/switch/402S01.png">
                <ul>
                  <li class="m-0">電源スイッチを押して、電源スイッチのON/OFFランプが点灯し、ロスナイやファンといった接続負荷機器が動作することを確認してください。</li>
                </ul>
              </li>
              <li>スマートスイッチの「WPS」ボタンをWi-Fiランプの点滅間隔が短くなるまで（約5秒間）先の細いもので押して離します。
                <img class="img-fluid figure-img d-block mx-auto cs-modal-img-width-sm" class="border-0" src="../assets/img/switch/402S02.png">
                <ul>
                  <li class="">Wi-Fiランプが5秒間に2回点滅します。</li>
                  <li class="">この状態は約10分間で終了します。機器登録が完了する前に10分経過したときはWi-Fiランプの状態を確認し、再度APモードにしてください。</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- modalSwitch010 -->
    <div class="modal fade" id="modalSwitch010" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-6">MyMUアプリを機器に接続する</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <ol>
              <li>以下のメッセージが表示されたら「接続」をタップしてください。「キャンセル」をタップすると接続に失敗します。
                <img class="img-fluid d-block mx-auto border rounded-2 my-3 cs-modal-img-width-sm" src="../assets/img/sen/463S01.png" alt="">
                <img class="img-fluid d-block mx-auto border rounded-2 my-3 cs-modal-img-width-sm" src="../assets/img/sen/463S02.png" alt="">
              </li>
              <li>
                「次へ」をタップすると位置情報の使用許可を求めるメッセージが表示されます。「1度だけ許可」「Appの使用中は許可」あるいは「アプリの使用時のみ」「今回のみ」をタップしてください。「許可しない」をタップすると接続に失敗します。
                <img class="img-fluid d-block mx-auto border rounded-2 my-3 cs-modal-img-width-sm" src="../assets/img/sen/463S03.png" alt="">
                <img class="img-fluid d-block mx-auto border rounded-2 my-3 cs-modal-img-width-sm" src="../assets/img/sen/463S04.png" alt="">
              </li>
              <li>接続に失敗した場合は次のメッセージが表示されます。「閉じる」をタップして最初からやり直してください。
                <img class="img-fluid d-block mx-auto border rounded-2 my-3 cs-modal-img-width-sm" src="../assets/img/switch/406S03.png" alt="">
              </li>
            </ol>
            <!-- おしらせ -->
            <div class="alert alert-primary" role="alert">
              <h6 class="alert-heading"><i class="bi bi-info-circle-fill pe-2 align-top"></i>おしらせ</h6>
              <p>
                オートメーション機能で位置情報を使用する場合は、位置情報の許可を求める画面で「Appの使用中は許可」「アプリの使用時のみ」をタップし、「正確な位置情報」を「オン」にしてください。オートメーション機能については取扱説明書をご確認ください。
              </p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- modalSwitch412 -->
    <div class="modal fade" id="modalSwitch412" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-6">スマートスイッチをWPS機能で接続する</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <ol>
              <li>ブレーカーを「ON」にします。
                <ul>
                  <li class="">すでにブレーカーが「ON」になっている場合は手順2へ進んでください。</li>
                  <li class="">電源をONにしてもスマートスイッチのWi-Fiランプは消灯状態です。</li>
                  <li class="">ブレーカーを入れて約5秒間はスイッチ操作ができません（P-04SWRCの場合、強/弱ランプが点灯)。</li>
                </ul>
              </li>
              <li>スマートスイッチに電源が入っていることを確認します。
                <img class="img-fluid figure-img d-block mx-auto cs-modal-img-width-xs" class="border-0" src="../assets/img/switch/402S01.png">
                <ul>
                  <li class="">電源スイッチを押して、電源スイッチのON/OFFランプが点灯し、ロスナイやファンといった接続負荷機器が動作することを確認してください。</li>
                </ul>
              </li>
              <li>スマートスイッチの「WPS」ボタンを先の細いもので約2秒間押して離します。
                <img class="img-fluid figure-img d-block mx-auto cs-modal-img-width-xs" class="border-0" src="../assets/img/switch/402S02.png">
                <ul>
                  <li class="">5秒以上押さないでください。5秒以上押すとAPモードになります。</li>
                </ul>

                <div class="table-responsive my-3">
                  <table class="table table-sm table-bordered text-nowrap align-top text-center">
                    <thead class="table-secondary">
                      <tr>
                        <th scope="col">Wi-Fiランプ</th>
                        <th scope="col">状態</th>
                        <th scope="col">対処方法</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>点滅<br>(0.5秒間隔)</td>
                        <td>Wi-Fiを探している</td>
                        <td>正常です。</td>
                      </tr>
                      <tr>
                        <td>消灯</td>
                        <td>Wi-Fiに接続していない</td>
                        <td>エラーです。<br>再度手順「3」を実施してください。</td>
                      </tr>
                      <tr>
                        <td>点滅<br>(5秒間に2回点滅)</td>
                        <td>APモード</td>
                        <td>APモードになっています。<br>「WPS」ボタンを先の細いもので5秒以上押し、<br>Wi-Fi ランプが消灯しているのを確認してから、<br>再度手順「3」を実施してください。</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </li>
              <li>ルーターの「WPS」ボタンを数秒間押して離します。
                <img class="img-fluid figure-img d-block mx-auto cs-modal-img-width-sm" src="../assets/img/rac/035S01.png">
              </li>
              <li>スマートスイッチのWi-Fiランプが5秒間点灯（WPS成功）することを確認します。
                <img class="img-fluid figure-img d-block mx-auto cs-modal-img-width-xs" src="../assets/img/switch/414S01.png">
                <ul>
                  <li class="">接続完了です。</li>
                  <li class="">サーバーとの初期通信が開始されWi-Fiランプが2秒間隔で点滅し、通信が完了すると点灯します。2秒間隔での点滅時間は通信状態により変化します。</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- create content modal -->
    <div class="content-modal"></div>
    <!-- create drawer menu -->
    <div class="drawer-menu"></div>
  </div>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
  <script>
    /* global bootstrap: false */
    (() => {
      'use strict'
      const tooltipTriggerList = Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      tooltipTriggerList.forEach(tooltipTriggerEl => {
        new bootstrap.Tooltip(tooltipTriggerEl)
      })
    })()
  </script>
  <!-- demoApp -->
  <script src="../assets/js/demo-app.js"></script>
  <!-- Swiper -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <!-- Tippy -->
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Create slides based on JSON data
      const createSlides = () => {
        const slideCount = demoAppJson.slides.length;
        const wrapper = document.getElementsByClassName('swiper-wrapper')[0];
        for (let i = 0; i < slideCount; i++) {
          const slide = document.createElement('div');
          slide.className = 'swiper-slide';
          slide.innerHTML = `
        <div class="swiper-slide_img_holder">
          <img src="${demoAppJson.slides[i].imagePath}" alt="${demoAppJson.slides[i].alt}" />
          <div id="${demoAppJson.slides[i].tooltipTarget}"></div>
        </div>
      `;
          wrapper.appendChild(slide);
        }
      };

      // Create slides elements
      createSlides();

      // URLパラメータからスライドインデックスを取得
      const params = new URLSearchParams(window.location.search);
      const slideIndex = parseInt(params.get('slide')) || 0;

      // Initialize Swiper
      const swiper = new Swiper('.swiper', {
        initialSlide: slideIndex,
        pagination: {
          el: '.swiper-pagination',
          type: "fraction",
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      });

      // create tippy instances
      const tooltipsInstances = demoAppJson.slides
        .filter(slide => slide.tooltipTarget && slide.tooltipDescription)
        .flatMap(({ tooltipTarget, tooltipDescription }) =>
          tippy(`#${tooltipTarget}`, {
            content: tooltipDescription,
            allowHTML: true,
            trigger: 'manual',
            placement: 'bottom',
            hideOnClick: false,
            interactive: true,
            theme: 'gradient',
            appendTo: () => document.querySelector('.swiper'),
          })
        );

      // 初期スライドのツールチップを強制表示
      const initialTooltip = tooltipsInstances[slideIndex];
      initialTooltip?.show();

      // フッターも初期表示
      const footerContent = document.getElementById('footerContent');
      footerContent.classList.remove('d-none');
      footerContent.innerHTML = demoAppJson.slides[slideIndex].footerContent || '';

      // スライド切り替え時の処理
      swiper.on('slideChangeTransitionEnd', () => {
        // hide all tooltips
        tooltipsInstances.forEach(instance => instance.hide());

        // show current tooltip
        const activeTooltip = tooltipsInstances[swiper.activeIndex];
        activeTooltip?.show();

        // automatic scroll for specific slides
        const targetIndexes = [6, 7, 9, 10, 18, 19];
        if (targetIndexes.includes(swiper.activeIndex)) {
          const activeSlide = swiper.slides[swiper.activeIndex];
          const scrollableContent = activeSlide.querySelector('.swiper-slide_img_holder');
          scrollableContent.scrollTo({
            top: scrollableContent.scrollHeight,
            behavior: 'smooth'
          });
        }

        // フッター更新
        const footerContent = document.getElementById('footerContent');
        footerContent.classList.remove('d-none');
        footerContent.innerHTML = demoAppJson.slides[swiper.activeIndex].footerContent || '';
      });
    });
  </script>
</body>

</html>